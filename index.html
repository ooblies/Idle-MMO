<html ng-app="idleApp" lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js" integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js" integrity="sha384-OgVRvuATP1z7JjHLkuOU7Xw704+h835Lr+6QL9UvYjZE3Ipu6Tp75j7Bh/kR0JKI" crossorigin="anonymous"></script>

    <!-- Angular -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.8.0/angular.min.js"></script>

    <!-- Local -->
    <link rel="stylesheet" type="text/css" href="style/main.css" />
    <link href="3rdParty/Font-Awesome/css/all.css" rel="stylesheet" />
    <link href="3rdParty/RPG-Awesome/css/rpg-awesome.css" rel="stylesheet" />
    <script src="js/constants.js"></script>
    <!-- Main -->
    <script src="js/main.js"></script>
</head>

<body ng-controller="idleController">
    <div class="wrapper">
        <!-- Sidebar  -->
        <nav id="sidebar">
            <div class="sidebar-header">
                <h3>Idle MMO</h3>
                <strong>IM</strong>
            </div>

            <ul class="list-unstyled components">
                <li>
                    <a href="#home">
                        <i class="fas fa-home"></i> Home
                    </a>
                </li>
            </ul>
            <ul class="list-unstyled components">
                <li class="active">
                    <a href="#homeSubmenu" data-toggle="collapse" aria-expanded="false" class="dropdown-toggle sidebar-dropdown-toggle">
                        <i class="fas fa-users"></i> Peeps
                    </a>
                    <ul class="collapse show list-unstyled" id="homeSubmenu">
                        <li class="animate-repeat" ng-repeat="character in data.characters">
                            <a href="#{{character.name}}-{{character.id}}"><i class="{{character.class.icon}}"></i> {{character.name}}({{character.level}})</a>
                        </li>
                        <li class="animate-repeat">
                            <a href="#create-character"><i class="fas fa-plus"></i>Create Character</a>
                        </li>
                    </ul>
                </li>
            </ul>
            <ul class="list-unstyled components">
                <li>
                    <a href="#contact">
                        <i class="fas fa-paper-plane"></i> Contact
                    </a>
                </li>
            </ul>

            <!-- To-Do: change this to a function to calculate thresholds based on CONSTANTS.Performance.tickRate -->
            <div class="performance fixed-bottom" ng-class="{'performance-ok':performance.timePerTick < 25,
            'performance-iffy':performance.timePerTick >= 25 && performance.timePerTick < 50,
            'performance-yikes':performance.timePerTick >= 50}">
                {{performance.timePerTick}}ms per tick
            </div>

        </nav>

        <!-- Page Content  -->
        <div id="content">

            <nav class="navbar navbar-expand-lg navbar-light bg-light">
                <div class="container-fluid">
                    <!--
                    <h2>{{display.topNavTitle}}</h2>
                        <button type="button" id="sidebarCollapse" class="btn btn-info">
                            <i class="fas fa-bars"></i>
                        </button>

                        <div class="collapse navbar-collapse" id="navbarSupportedContent">
                            <ul class="nav navbar-nav ml-auto">
                                <li class="nav-item active">
                                    <a class="nav-link" href="#">Page</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="#">Page</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="#">Page</a>
                                </li>
                                <li class="nav-item">
                                    <a class="nav-link" href="#">Page</a>
                                </li>
                            </ul>
                        </div>
                    -->
                </div>
            </nav>

            <section id="home">
                <h2>Home page!</h2>
                <p>
                    Does this work? I have no idea.
                </p>
            </section>
            <section id="contact">
                <h2>Contact</h2>
                <p>
                    contact?
                </p>
            </section>
            <section ng-repeat="character in data.characters" id="{{character.name}}-{{character.id}}">
                <h2>{{character.name}}</h2>
                <p>
                    Class: {{character.class.name}}
                    <br/> Level: {{character.level}}
                </p>
            </section>
            <section id="create-character">
                <h2>Create Character</h2>
                <form id="formCreateCharacter" class="needs-validation" novalidate ng-submit="createCharacter()">
                    <div class="form-group row">
                        <label for="createCharacterFormName" class="col-sm-2 col-form-label">Name</label>
                        <div class="col-sm-10">
                            <input type="text" class="form-control" id="createCharacterFormName" placeholder="Name..." required autocomplete="off">
                            <div class="invalid-feedback">
                                Please enter a name.
                            </div>
                        </div>
                    </div>
                    <div class="form-group row">
                        <label for="createCharacterFormClass" class="col-sm-2 col-form-label">Class</label>
                        <div class="col-sm-10">
                            <select class="custom-select" id="createCharacterFormClass" required>
                                <option invalid disabled selected value="">Choose...</option>
                                <option ng-repeat="class in CONSTANTS.classes" value="{{class.index}}">{{class.name}}</option>                      
                            </select>
                            <div class="invalid-feedback">
                                Please select a class.
                            </div>
                        </div>
                    </div>

                    <div class="form-group row">
                        <div class="col-sm-10">
                            <button type="submit" class="btn btn-primary">Create</button>
                        </div>
                    </div>
                </form>

            </section>
        </div>
    </div>
    <script type="text/javascript">
        $(document).ready(function() {
            $('#sidebarCollapse').on('click', function() {
                $('#sidebar').toggleClass('active');
            });
        });
    </script>
</body>

</html>